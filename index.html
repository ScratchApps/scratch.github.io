<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visitor Logger</title>
</head>
<body>
    <h1>Welcome to ScratchApps!</h1>
    <script>
        async function triggerGitHubAction() {
            try {
                const response = await fetch("https://api.github.com/repos/ScratchApps/scratchapps.github.io/actions/workflows/webhook.yml/dispatches", {
                    method: "POST",
                    headers: {
                        "Accept": "application/vnd.github+json",
                        "Authorization": "Bearer {{ secrets.PAT_TOKEN }}", 
                        "X-GitHub-Api-Version": "2022-11-28"
                    },
                    body: JSON.stringify({ ref: "main" }) // Triggers the workflow
                });

                if (response.ok) {
                    console.log("GitHub Action triggered successfully!");
                } else {
                    console.error("Failed to trigger GitHub Action:", await response.text());
                }
            } catch (error) {
                console.error("Error triggering GitHub Action:", error);
            }
        }

        // Trigger GitHub Actions on page load
        triggerGitHubAction();
    </script>
</body>
</html>
